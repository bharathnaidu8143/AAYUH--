<!DOCTYPE html>
<html>
<head>
  <title>Aayuh ‚Äì Medicine Info</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f0f8f7;
      padding: 30px;
    }
    h2 {
      color: #00796b;
    }
    input[type="text"] {
      padding: 10px;
      width: 300px;
      font-size: 16px;
      border-radius: 4px;
      border: 1px solid #ccc;
    }
    button {
      padding: 10px 15px;
      font-size: 16px;
      background-color: #00796b;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      margin-left: 10px;
    }
    #result {
      margin-top: 20px;
      padding: 15px;
      background-color: #e0f2f1;
      border-left: 5px solid #00796b;
      border-radius: 4px;
    }
    #disclaimer {
      margin-top: 40px;
      font-size: 14px;
      color: #555;
      background-color: #fff3cd;
      padding: 15px;
      border-left: 5px solid #ffc107;
      border-radius: 4px;
    }
  </style>
</head>

<body>

<h2>üîç Search for Medicine Information</h2>
<input type="text" id="medicineInput" placeholder="Enter medicine name">
<button onclick="searchMedicine()">Search</button>

<div id="result"></div>

<div id="disclaimer">
‚ö†Ô∏è Information is fetched from a public drug database.  
This is for educational purposes only.  
Always consult a doctor before using any medicine.
</div>

<script>
/* ---------- Simplify long medical text ---------- */
function simplify(text) {
  if (!text) return "Information not available.";
  return text.replace(/\n/g, " ").split(".").slice(0, 2).join(".") + ".";
}

/* ---------- Smart timing + simple explanation ---------- */
function getSimpleUsage(medicineName) {
  const name = medicineName.toLowerCase();

  if (name.includes("paracetamol")) {
    return {
      timing: "After food, every 4‚Äì6 hours if needed",
      explanation:
        "Used to reduce fever and body pain. Take one tablet after meals. Do not take more than 4 tablets in a day."
    };
  }

  if (name.includes("ibuprofen")) {
    return {
      timing: "After food, every 6‚Äì8 hours",
      explanation:
        "Helps reduce pain and swelling. Always take after food to avoid stomach problems."
    };
  }

  if (name.includes("cetirizine") || name.includes("levocetirizine")) {
    return {
      timing: "Once daily at night",
      explanation:
        "Used for allergy symptoms like sneezing or itching. May cause sleepiness, so take it at night."
    };
  }

  if (
    name.includes("amoxicillin") ||
    name.includes("azithromycin") ||
    name.includes("antibiotic")
  ) {
    return {
      timing: "Morning and night, at fixed times",
      explanation:
        "Antibiotic medicine. Take it at the same time every day and complete the full course even if you feel better."
    };
  }

  return {
    timing: "After food, as advised by a doctor",
    explanation:
      "Take this medicine only as prescribed by a healthcare professional."
  };
}

/* ---------- Main API search function ---------- */
async function searchMedicine() {
  const name = document.getElementById("medicineInput").value.trim();
  const result = document.getElementById("result");

  if (!name) {
    result.innerHTML = "‚ùå Please enter a medicine name.";
    return;
  }

  result.innerHTML = "üîÑ Fetching medicine information...";

  try {
    const response = await fetch(
      `https://api.fda.gov/drug/label.json?search=${encodeURIComponent(name)}&limit=1`
    );

    if (!response.ok) throw new Error();

    const data = await response.json();
    const med = data.results[0];

    const use = simplify(med.indications_and_usage?.[0]);
    const dosage = simplify(med.dosage_and_administration?.[0]);
    const sideEffects = simplify(med.adverse_reactions?.[0]);

    const simple = getSimpleUsage(name);

    result.innerHTML = `
      <h3>${med.openfda?.generic_name?.[0] || name}</h3>

      <p><strong>Use:</strong> ${use}</p>

      <p><strong>Dosage:</strong> ${dosage}</p>

      <p><strong>‚è∞ Timing:</strong> ${simple.timing}</p>

      <p><strong>Side Effects:</strong> ${sideEffects}</p>

      <hr>

      <p><strong>üß† Simple Explanation:</strong><br>
      ${simple.explanation}</p>
    `;
  } catch {
    result.innerHTML = `
      ‚ùå Medicine information not found.<br>
      Please try common names like <b>paracetamol</b>, <b>ibuprofen</b>, or <b>cetirizine</b>.
    `;
  }
}
</script>

</body>
</html>
